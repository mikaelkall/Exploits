FROM adoptopenjdk/maven-openjdk11:latest AS builder
COPY --chown=root:root . /home/maven/src
WORKDIR /home/maven/src
RUN mvn clean package

FROM tomcat:9-jdk11-openjdk
EXPOSE 8080
COPY --from=builder /home/maven/src/target/spring4shell.war /usr/local/tomcat/webapps/
RUN apt-get -y update && apt-get -y install python
CMD ["catalina.sh", "run"]
